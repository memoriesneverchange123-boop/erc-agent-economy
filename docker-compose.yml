version: '3.8'

services:
  postgres:
      image: postgres:14-alpine
          container_name: erc-postgres
              environment:
                    POSTGRES_USER: erc_user
                          POSTGRES_PASSWORD: erc_password
                                POSTGRES_DB: erc_economy
                                    ports:
                                          - "5432:5432"
                                              volumes:
                                                    - postgres_data:/var/lib/postgresql/data
                                                        healthcheck:
                                                              test: ["CMD-SHELL", "pg_isready -U erc_user -d erc_economy"]
                                                                    interval: 10s
                                                                          timeout: 5s
                                                                                retries: 5

                                                                                  redis:
                                                                                      image: redis:7-alpine
                                                                                          container_name: erc-redis
                                                                                              ports:
                                                                                                    - "6379:6379"
                                                                                                        volumes:
                                                                                                              - redis_data:/data
                                                                                                                  healthcheck:
                                                                                                                        test: ["CMD", "redis-cli", "ping"]
                                                                                                                              interval: 10s
                                                                                                                                    timeout: 5s
                                                                                                                                          retries: 5
                                                                                                                                          
                                                                                                                                          volumes:
                                                                                                                                            postgres_data:
                                                                                                                                              redis_data:
                                                                                                                                              
                                                                                                                                              networks:
                                                                                                                                                default:
                                                                                                                                                    name: erc-network
